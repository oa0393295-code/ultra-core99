<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STUDY_WARS v2.0 | THE FINAL PROTOCOL</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>
<body class="bg-[#050505] text-white font-mono overflow-hidden">

    <div id="setup-overlay" class="fixed inset-0 z-[500] bg-black/90 flex items-center justify-center backdrop-blur-3xl">
        <div class="p-12 border border-cyan-500/20 rounded-[50px] text-center bg-black">
            <h1 class="text-4xl font-black mb-8 italic tracking-tighter">SELECT_UNIT_ID</h1>
            <div class="grid grid-cols-2 gap-6">
                <button onclick="App.init('Alpha')" class="px-8 py-4 border border-cyan-500 text-cyan-500 font-black hover:bg-cyan-500 hover:text-black transition-all rounded-2xl">ALPHA_PILOT</button>
                <button onclick="App.init('Beta')" class="px-8 py-4 border border-purple-500 text-purple-500 font-black hover:bg-purple-500 hover:text-black transition-all rounded-2xl">BETA_PILOT</button>
            </div>
        </div>
    </div>

    <div id="battle-field" class="fixed inset-0 -z-10 opacity-30"></div>

    <main class="h-screen flex flex-col p-6">
        <header class="flex justify-between items-center mb-8 px-4">
            <div id="alpha-card" class="flex flex-col">
                <span class="text-[10px] text-cyan-500 font-black tracking-widest">ALPHA_STRIKER</span>
                <span id="alpha-score" class="text-4xl font-black italic">0000</span>
                <span id="alpha-eff-label" class="text-[9px] text-gray-600">EFFICIENCY: 0%</span>
            </div>

            <div class="flex-grow max-w-xl px-12">
                <div class="flex justify-between text-[9px] font-black mb-2 italic">
                    <span class="text-cyan-500">DOMINATION_SYNC</span>
                    <span id="win-ratio" class="text-white">50/50</span>
                </div>
                <div class="h-1.5 bg-white/5 rounded-full overflow-hidden flex shadow-[0_0_15px_rgba(255,255,255,0.05)]">
                    <div id="power-bar-alpha" class="h-full bg-cyan-500 shadow-[0_0_20px_#00f2ff] transition-all duration-1000" style="width: 50%"></div>
                    <div id="power-bar-beta" class="h-full bg-purple-600 shadow-[0_0_20px_#bc13fe] transition-all duration-1000" style="width: 50%"></div>
                </div>
            </div>

            <div id="beta-card" class="flex flex-col items-end">
                <span class="text-[10px] text-purple-500 font-black tracking-widest">BETA_STRIKER</span>
                <span id="beta-score" class="text-4xl font-black italic">0000</span>
                <span id="beta-eff-label" class="text-[9px] text-gray-600">EFFICIENCY: 0%</span>
            </div>
        </header>

        <div class="grid grid-cols-12 gap-6 flex-grow overflow-hidden">
            <div class="col-span-3 border border-white/5 rounded-[40px] p-6 bg-white/[0.02] flex flex-col">
                <h3 class="text-[10px] font-black mb-6 text-gray-500 uppercase tracking-[0.3em]">Objectives</h3>
                <div id="task-list" class="space-y-3 overflow-y-auto flex-grow pr-2"></div>
                <input type="text" id="task-input" placeholder="New_Mission..." class="w-full bg-white/5 border border-white/10 p-4 rounded-2xl text-xs outline-none focus:border-cyan-500 mt-4">
            </div>

            <div class="col-span-6 flex flex-col gap-4">
                <div class="flex-grow border border-white/5 rounded-[50px] relative overflow-hidden flex flex-col items-center justify-center group bg-gradient-to-b from-white/[0.03] to-transparent">
                    <div class="absolute top-12 flex gap-2 opacity-0 group-hover:opacity-100 transition-all duration-700">
                        <input type="number" id="manual-mins" placeholder="Mins" class="w-20 bg-black border border-white/20 rounded-xl p-2 text-center text-xs text-cyan-400 outline-none">
                        <button onclick="Timer.setCustomTime()" class="text-[10px] font-black bg-white/10 px-4 rounded-xl hover:bg-cyan-500 hover:text-black transition">SET</button>
                    </div>

                    <div id="timer-display" class="text-[120px] font-black italic tracking-tighter leading-none z-10">25:00</div>
                    
                    <div class="flex gap-12 mt-8 z-10">
                        <div class="text-center">
                            <div class="text-[9px] text-gray-600 font-black uppercase">Session_Total</div>
                            <div id="today-total" class="text-xl font-black text-cyan-400">0h 0m</div>
                        </div>
                        <div class="text-center">
                            <div class="text-[9px] text-gray-600 font-black uppercase">Daily_Efficiency</div>
                            <div id="today-efficiency" class="text-xl font-black text-purple-500">0%</div>
                        </div>
                    </div>
                </div>

                <div class="h-28 border border-white/5 rounded-[35px] flex items-center justify-around px-12 bg-white/[0.01]">
                    <button id="start-btn" onclick="Timer.start()" class="px-12 py-4 bg-cyan-500 text-black font-black rounded-2xl shadow-[0_0_30px_rgba(0,242,255,0.4)] hover:scale-105 transition">START_FOCUS</button>
                    <button id="pause-btn" onclick="Timer.pause()" class="hidden px-8 py-4 border border-yellow-500 text-yellow-500 font-black rounded-2xl hover:bg-yellow-500/10 transition">PAUSE</button>
                    <button onclick="Timer.terminate()" class="text-[10px] font-black text-red-900 uppercase tracking-widest hover:text-red-500 transition">Terminate</button>
                </div>
            </div>

            <div class="col-span-3 flex flex-col gap-6">
                <div class="h-1/2 border border-white/5 rounded-[40px] p-6 bg-white/[0.02] flex flex-col">
                    <h3 class="text-[10px] font-black mb-4 text-gray-500 uppercase tracking-[0.3em]">Battle_Log</h3>
                    <div id="battle-log" class="flex-grow overflow-y-auto text-[9px] space-y-2 text-gray-600 italic"></div>
                </div>
                <div class="flex-grow border border-white/5 rounded-[40px] p-6 bg-purple-500/[0.02] flex flex-col">
                    <div id="chat-box" class="flex-grow overflow-y-auto mb-4 text-[10px] space-y-2"></div>
                    <input type="text" id="chat-input" placeholder="Send_Message..." class="w-full bg-black border border-white/10 p-3 rounded-xl text-[10px] outline-none focus:border-purple-500">
                </div>
            </div>
        </div>
    </main>

    <script src="app.js"></script>
</body>
</html>