<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>منافسة الأصدقاء</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="login-screen" class="glass-panel">
        <i class="fas fa-users fa-3x" style="color: #00c3ff; margin-bottom: 20px;"></i>
        <h1>مرحباً بك في منافسة الأصدقاء</h1>
        <button id="google-login" class="btn-glass btn-glow">
            <i class="fab fa-google"></i> تسجيل الدخول بـ Google
        </button>
    </div>

    <div id="main-app" style="display: none;">
        <header class="glass-header">
            <div class="user-info">
                <img id="user-photo" src="" alt="user" class="avatar">
                <span id="user-name"></span>
            </div>
            <button id="logout-btn" class="btn-glass-small">
                <i class="fas fa-sign-out-alt"></i> خروج
            </button>
        </header>

        <div class="dashboard">
            <!-- بطاقة عداد المذاكرة (زر واحد) -->
            <div class="glass-card timer-card">
                <h2><i class="fas fa-clock"></i> عداد المذاكرة</h2>
                <div class="circular-progress">
                    <svg viewBox="0 0 100 100">
                        <defs>
                            <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" stop-color="#00c3ff" />
                                <stop offset="100%" stop-color="#aaff00" />
                            </linearGradient>
                        </defs>
                        <circle class="bg" cx="50" cy="50" r="45"></circle>
                        <circle class="progress" cx="50" cy="50" r="45" style="stroke-dasharray: 283; stroke-dashoffset: 283;"></circle>
                    </svg>
                    <div class="time-display" id="timer-display">00:00:00</div>
                </div>
                <div class="timer-controls">
                    <button id="toggle-timer" class="btn-icon"><i class="fas fa-play"></i></button>
                    <!-- زر واحد فقط -->
                </div>
            </div>

            <!-- بطاقة تسجيل اليوم -->
            <div class="glass-card log-card">
                <h2><i class="fas fa-pen"></i> تسجيل اليوم</h2>
                <div class="prayer-checkboxes">
                    <label class="prayer-item"><input type="checkbox" id="prayer-fajr"> <i class="fas fa-sun"></i> الفجر</label>
                    <label class="prayer-item"><input type="checkbox" id="prayer-dhuhr"> <i class="fas fa-sun"></i> الظهر</label>
                    <label class="prayer-item"><input type="checkbox" id="prayer-asr"> <i class="fas fa-sun"></i> العصر</label>
                    <label class="prayer-item"><input type="checkbox" id="prayer-maghrib"> <i class="fas fa-moon"></i> المغرب</label>
                    <label class="prayer-item"><input type="checkbox" id="prayer-ishaa"> <i class="fas fa-moon"></i> العشاء</label>
                    <label class="prayer-item"><input type="checkbox" id="prayer-taraweeh"> <i class="fas fa-star"></i> التراويح</label>
                </div>
                <div class="quran-input">
                    <label><i class="fas fa-book-quran"></i> عدد الصفحات:</label>
                    <input type="number" id="quran-pages" min="0" value="0">
                </div>
                <button id="save-log-btn" class="btn-glass"><i class="fas fa-save"></i> حفظ</button>
                <!-- لا يوجد زر تعديل هنا، سيكون في قسم السجل -->
            </div>

            <!-- حالة الأصدقاء -->
            <div class="glass-card friend-status">
                <h2><i class="fas fa-user-friends"></i> حالة الأصدقاء الآن</h2>
                <div id="friends-list"></div>
            </div>

            <!-- لوحة المتصدرين مع الحالة -->
            <div class="glass-card leaderboard">
                <h2><i class="fas fa-trophy"></i> لوحة المتصدرين - اليوم</h2>
                <div class="leaderboard-tabs">
                    <button class="tab-btn active" data-type="study"><i class="fas fa-clock"></i> المذاكرة</button>
                    <button class="tab-btn" data-type="quran"><i class="fas fa-book-quran"></i> القرآن</button>
                    <button class="tab-btn" data-type="prayer"><i class="fas fa-mosque"></i> الصلوات</button>
                </div>
                <div id="leaderboard-content" class="leaderboard-list"></div>
            </div>
        </div>

        <!-- قسم السجل (بدون أزرار عرض، مع زر تعديل خاص) -->
        <div class="logs-section glass-card">
            <h2><i class="fas fa-history"></i> السجل اليومي</h2>
            <div class="logs-controls">
                <input type="date" id="log-date" class="date-input">
                <select id="friend-select" class="friend-select">
                    <option value="">سجلي أنا</option>
                </select>
                <!-- زر التعديل سيظهر فقط إذا كان السجل خاص بالمستخدم الحالي -->
                <button id="edit-log-btn" class="btn-glass-small" style="display: none;"><i class="fas fa-edit"></i> تعديل</button>
            </div>
            <div id="log-display" class="log-display"></div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script src="app.js" defer></script>
</body>
</html>